## 2. ビジネスディメンションのモデリング（第3章）
顧客・口座・日付等の分析の切り口をディメンションとして定義し、キー設計や履歴管理方式を決める工程

### 作り方（BEAM* 手順）
1. **ディメンションを発見する**  
   顧客、口座、日付、チャネル、ATM種別/地域など
2. **ビジネスに必要な属性を定義**  
   CV（変化が少ない属性）とHV（履歴を残す属性）を分類
3. **将来の分析ニーズも考慮**  
   例：顧客の住所変更やステータス変更を履歴で追えるようにする

---

### 階層（Hierarchy）とは？
- ディメンション内で集計や分析の粒度を変えられる構造
- 例：  
  - 日付：年 → 四半期 → 月 → 日  
  - 地域：全国 → 都道府県 → 市区町村  
  - 顧客：全顧客 → 個人顧客 → VIP顧客
- BIツールで drill down / roll up を可能にするために設計時に定義する
- ポイント：階層はディメンションの属性間の論理的な親子関係を明確化する

---
💡**ポイント**
- HV(Histrical value)は「いつからいつまで有効だったか」を管理できる  
- CV(Current value)は常に最新の値だけを保持し、集計効率を上げる  
- SCDタイプ2が基本（履歴保持用に複数レコードを許容）
---

### 顧客ディメンション（SCD対応）
- 顧客ID（主キー）
- 氏名（CV/HV）
- 生年月日（CV）
- 性別（CV）
- 住所（CV/HV）
- 顧客ステータス（個人/VIP）（CV/HV）
- 有効開始日（HV）
- 有効終了日（HV）
- 現行フラグ（CV）
- **階層例**：顧客セグメント階層（全顧客 → 個人顧客 → VIP顧客）

### 口座ディメンション（SCD対応）
- 口座ID（主キー）
- 口座種別（普通/貯蓄）（CV）
- 開設日（CV）
- 通貨（CV）
- 利用状況（有効/休眠/解約）（CV/HV）
- 有効開始日（HV）
- 有効終了日（HV）
- 現行フラグ（CV）
- **階層例**：口座階層（全口座 → 普通預金 → 貯蓄預金）

### 日付ディメンション（静的）
- 日付ID（主キー）
- 年
- 月
- 日
- 曜日
- 四半期
- **階層例**：日付階層（年 → 四半期 → 月 → 日）

### チャネルディメンション（静的）
- チャネルID（主キー）
- チャネル種別（スマホアプリ/オンラインAPI）（CV）
- プラットフォーム（iOS/Android）（CV）
- **階層例**：チャネル階層（全チャネル → スマホアプリ → iOS / Android）

### ATM種別/地域ディメンション（SCD対応）
- ATM種別ID（主キー）
- 提携ATM名称（セブン銀行）（CV）
- ATM設置地域（都道府県/市区町村）（CV/HV）
- 有効開始日（HV）
- 有効終了日（HV）
- 現行フラグ（CV）
- **階層例**：地域階層（全国 → 都道府県 → 市区町村）

---


